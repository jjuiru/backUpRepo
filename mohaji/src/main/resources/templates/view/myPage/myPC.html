<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>PC 등록 페이지</title>
    <!-- 부트스트랩 CDN 링크 추가 -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- jQuery 로드 -->
    <script src="/webjars/jquery/3.6.0/jquery.min.js"></script>
    <!-- 부트스트랩 스크립트 로드 -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <style>
        /* 스타일링 추가 */
        .container {
            margin-top: 50px;
        }
        .btn-container {
            margin-top: 20px;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>PC 등록 페이지</h1>
    <!-- PC 등록 버튼 -->
    <div class="btn-container">
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#registerModal">
            PC 등록
        </button>
    </div>
    <ul class="list-group">
        <!-- ipAddressList의 각 값을 반복하여 출력 -->
        <li th:each="ip : ${ipAddressList}" class="list-group-item" th:text="${ip}"></li>
    </ul>
</div>

<!-- PC 등록 모달 -->
<div class="modal fade" id="registerModal" tabindex="-1" role="dialog" aria-labelledby="registerModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="registerModalLabel">PC 등록 확인</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                현재 사용하는 피시를 등록하시겠습니까?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">취소</button>
                <button type="button" class="btn btn-primary" onclick="registerPC()">확인</button>
            </div>
        </div>
    </div>
</div>
<script>
    // PC 등록 함수
    function registerPC() {
        // PC 등록 컨트롤러로 이동하는 코드 작성
        // 여기에서 컨트롤러로 이동하고, 등록한 PC의 IP 주소를 받아와야 합니다.
        $.ajax({
            type: "POST",
            url: "/registerPC",
            success: function(data) {
                // 성공적으로 등록되었을 때 처리할 코드 작성
                // 예를 들어, 다시 이 페이지로 이동하거나 새로고침하는 등의 동작을 수행할 수 있습니다.
                console.log("성공");
                window.location.reload();
            },
            error: function(xhr, status, error) {
                // 에러가 발생했을 때 처리할 코드 작성
                console.error(error);
            }
        });
    }
</script>
</body>
</html>